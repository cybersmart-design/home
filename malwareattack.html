<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Incident Response Training â€“ Panic Mode</title>
<style>
body {margin:0; background:#07090e; color:#eaeaea; font-family:"JetBrains Mono", monospace;}
button {background:#ff4d4d; border:none; color:#000; padding:14px 22px; font-size:14px; cursor:pointer; margin-top:25px;}
button:hover {opacity:0.85;}
.tutorial {max-width:900px; margin:60px auto; padding:30px; line-height:1.6;}
.tutorial h1 {color:#ffcc00;}
.tutorial h2 {color:#00ff9c; margin-top:35px;}
.warning {background:#1a0f12; border-left:5px solid #ff4d4d; padding:15px; margin:25px 0;}
code {background:#020409; padding:4px 6px; border-radius:4px; color:#00ff9c;}
.simulation {display:none; height:100vh;}
.layout {display:grid; grid-template-columns:3fr 1fr; height:100%;}
.main {padding:20px; border-right:2px solid #2a3248;}
.side {padding:20px; background:#05070b;}
h1.sim {margin-top:0; color:#ff4d4d; animation:pulse 1.2s infinite;}
@keyframes pulse {50% {opacity:0.6;}}
.alert {background:#1a0f12; border-left:5px solid #ff4d4d; padding:12px; margin-bottom:15px;}
.terminal {background:#020409; border:1px solid #2a3248; height:65%; padding:10px; overflow-y:auto; font-size:14px;}
.input {display:flex; margin-top:10px;}
.input span {color:#00ff9c; margin-right:6px;}
.input input {flex:1; background:black; color:#eaeaea; border:none; outline:none; font-family:inherit;}
.metric {margin-bottom:15px;}
.danger {color:#ff4d4d; font-weight:bold; animation:blink 1s infinite;}
@keyframes blink {50% {opacity:0.4;}}
</style>
</head>
<body>

<!-- ================= TUTORIAL ================= -->
<div class="tutorial" id="tutorial">
<h1>ğŸ›¡ Incident Response Training â€“ Briefing</h1>
<p>You are about to enter a live incident response simulation. Apply the correct commands under pressure.</p>
<div class="warning">Safe simulation. Delays and incorrect actions increase impact.</div>

<h2>Commands</h2>
<ul>
<li><code>apply containment</code> â€“ Stop malware spread</li>
<li><code>isolate endpoint</code> â€“ Disconnect infected system</li>
<li><code>scan system</code> â€“ Analyze malware</li>
<li><code>identify threat</code> â€“ Confirm malware type</li>
<li><code>quarantine threat</code> â€“ Partial containment</li>
<li><code>eradicate threat</code> â€“ Remove malware</li>
<li><code>backup data</code> â€“ Save files</li>
<li><code>recover system</code> â€“ Restore system</li>
<li><code>check logs</code> â€“ View activity clues</li>
<li><code>notify team</code> â€“ Alert SOC</li>
<li><code>help</code> â€“ Show guidance</li>
</ul>

<button onclick="startSimulation()">Proceed to Simulation</button>
</div>

<!-- ================= SIMULATION ================= -->
<div class="simulation" id="simulation">
<div class="layout">
<div class="main">
<h1 class="sim">ğŸš¨ ACTIVE RANSOMWARE INCIDENT</h1>
<div class="alert">Endpoint <strong>WS-23</strong> is encrypting files.</div>
<div class="terminal" id="terminal"></div>
<div class="input"><span>&gt;</span><input id="cmd" placeholder="type a command" autofocus/></div>
</div>
<div class="side">
<div class="metric">â± Time Remaining:<br><span class="danger" id="timer">02:00</span></div>
<div class="metric">ğŸ“‰ Files Affected:<br><span class="danger" id="files">37</span></div>
<div class="metric">ğŸŒ Network:<br><span id="net">CONNECTED</span></div>
<div class="metric">ğŸ¦  Threat Status:<br><span id="status">ACTIVE</span></div>
</div>
</div>
</div>

<script>
function startSimulation(){
  document.getElementById("tutorial").style.display="none";
  document.getElementById("simulation").style.display="block";
  initSim();
}

function initSim(){
  const term = document.getElementById("terminal");
  const cmd = document.getElementById("cmd");
  const timerEl = document.getElementById("timer");
  const filesEl = document.getElementById("files");
  const netEl = document.getElementById("net");
  const statusEl = document.getElementById("status");

  let time = 90; // Shorter for panic
  let files = 37;
  let failed = false;
  let interval;
  let alertNoise = ["[ALERT] Unknown process spawned","[EDR] Suspicious memory activity","[FS] Rapid file modification detected","[ALERT] Possible lateral movement","[FS] Ransom note created","[EDR] Process injected into svchost"];

  let state = {
    contained:false, isolated:false, scanned:false,
    identified:false, quarantined:false,
    eradicated:false, backedUp:false
  };

  function log(msg){
    const d = document.createElement("div");
    d.textContent = msg;
    term.appendChild(d);
    term.scrollTop = term.scrollHeight;
  }

  function randomNoise(){
    let msg = alertNoise[Math.floor(Math.random()*alertNoise.length)];
    log(msg);
  }

  function startTimer(){
    interval = setInterval(()=>{
      time--;
      let dynamicLoss = state.contained ? Math.floor(Math.random()*2+1) : Math.floor(Math.random()*8+5 + (90-time)/10);
      if(!state.quarantined) dynamicLoss += 2;
      files += dynamicLoss;

      timerEl.textContent = `0${Math.floor(time/60)}:${String(time%60).padStart(2,"0")}`;
      filesEl.textContent = files;

      // Panic mode: random alerts
      if(Math.random() < 0.35) randomNoise();

      if(time <=0){
        clearInterval(interval);
        failed = true;
        log("âŒ SYSTEM COMPROMISED: Files encrypted.");
        log("Type `try again` to restart or `exit` to end.");
        alert("ğŸš¨ TIME'S UP! You failed to protect the system.");
      }
    },1000);
  }

  function resetSim(){
    clearInterval(interval);
    term.innerHTML = "";
    time = 90;
    files = 37;
    failed = false;
    state = {contained:false, isolated:false, scanned:false, identified:false, quarantined:false, eradicated:false, backedUp:false};
    netEl.textContent = "CONNECTED";
    statusEl.textContent = "ACTIVE";
    cmd.disabled = false;
    startTimer();
    log("[EDR] Suspicious process detected");
    log("[ALERT] Encryption behavior observed");
  }

  log("[EDR] Suspicious process detected");
  log("[ALERT] Encryption behavior observed");
  startTimer();

  cmd.addEventListener("keydown", e=>{
    if(e.key !== "Enter") return;
    const input = cmd.value.trim().toLowerCase();
    cmd.value = "";
    log("> "+input);

    if(failed){
      if(input === "try again") resetSim();
      else if(input === "exit") { log("âœ” Training session ended."); cmd.disabled = true; }
      else log("âŒ Invalid choice. Type `try again` or `exit`.");
      return;
    }

    switch(input){
      case "help": log("Contain â†’ Analyze â†’ Eradicate â†’ Recover"); break;
      case "apply containment": state.contained=true; netEl.textContent="DISCONNECTED"; log("âœ” Containment applied"); break;
      case "isolate endpoint": state.isolated=true; netEl.textContent="ISOLATED"; log("âœ” Endpoint isolated"); break;
      case "scan system": state.scanned=true; log("âœ” Scan completed"); break;
      case "identify threat": 
        if(!state.contained){ log("âŒ Policy violation"); files+=15; } 
        else { state.identified=true; log("âœ” Threat identified"); } break;
      case "quarantine threat": state.quarantined=true; log("âœ” Threat quarantined"); break;
      case "eradicate threat":
        if(!state.identified || !state.scanned){ log("âŒ Eradication failed"); files+=20; } 
        else { state.eradicated=true; statusEl.textContent="NEUTRALIZED"; log("âœ” Threat eradicated"); } break;
      case "backup data": state.backedUp=true; log("âœ” Backup complete"); break;
      case "recover system":
        if(!state.eradicated) log("âŒ Recovery failed");
        else { log("âœ… Recovery successful"); clearInterval(interval); cmd.disabled=true; } break;
      case "check logs": log("ğŸ” Logs show rapid encryption and network activity. Focus on containment and identification."); break;
      case "notify team": log("âœ” SOC team notified."); break;
      default: log("âŒ Unknown command"); files +=10;
    }
  });
}
</script>
</body>
</html>
