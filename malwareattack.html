<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Incident Response Training ‚Äì Panic Mode</title>
<style>
body { margin:0; background:#07090e; color:#eaeaea; font-family:"JetBrains Mono", monospace; }
button { border:none; color:#000; cursor:pointer; }
button:hover { opacity:0.85; }
.tutorial { max-width:900px; margin:60px auto; padding:30px; line-height:1.6; }
.tutorial h1 { color:#ffcc00; } .tutorial h2 { color:#00ff9c; margin-top:35px; }
.warning { background:#1a0f12; border-left:5px solid #ff4d4d; padding:15px; margin:25px 0; }
code { background:#020409; padding:4px 6px; border-radius:4px; color:#00ff9c; }
.simulation { display:none; height:100vh; }
.layout { display:grid; grid-template-columns: 1fr 0.9fr; height:100%; }
@media (max-width: 860px) { .layout { grid-template-columns: 1fr; } }
.main { padding:20px; border-right:2px solid #2a3248; }
@media (max-width: 860px) { .main { border-right: none; border-bottom:2px solid #2a3248; } }
.side { padding:20px; background:#05070b; }
h1.sim { margin-top:0; color:#ff4d4d; animation:pulse 1.2s infinite; }
@keyframes pulse { 50% { opacity:0.6; } }
.alert { background:#1a0f12; border-left:5px solid #ff4d4d; padding:12px; margin-bottom:15px; }
.terminal { background:#020409; border:1px solid #2a3248; height: 48vh; max-height: 520px; min-height: 280px; padding:12px; overflow-y:auto; font-size:13px; line-height:1.35; }
.input { display:flex; margin-top:10px; }
.input span { color:#00ff9c; margin-right:6px; }
.input input { flex:1; background:black; color:#eaeaea; border:none; outline:none; font-family:inherit; font-size:16px; padding:10px; }
.metric { margin-bottom:15px; }
.danger { color:#ff4d4d; font-weight:bold; animation:blink 1s infinite; }
.success { color:#00ff9c; font-weight:bold; } .error { color:#ff4d4d; font-weight:bold; }
@keyframes blink { 50% { opacity:0.4; } }
.mode-select { display:flex; justify-content:space-between; margin-top:20px; }
.mode-select button{ width:48%; padding:12px; border:none; border-radius:8px; font-weight:bold; cursor:pointer; }
.guided { background:#22c55e; color:white; } .challenge { background:#ef4444; color:white; }
.guided-panel { background:#0a0c11; border:1px solid #2a3248; padding:15px; margin-top:15px; }
.guided-panel h3 { margin:0 0 10px 0; color:#00ff9c; } 
.guided-panel p { margin:6px 0; }
.guided-panel .hint { color:#c9d1d9; } .guided-panel .next { color:#00ff9c; font-weight:bold; } 
.guided-panel .step { color:#ffcc00; }
.popup-bg { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.65); display:none; justify-content:center; align-items:center; }
.popup { background:#0a0c11; border:1px solid #2a3248; padding:25px; width:90%; max-width:450px; text-align:center; }
.popup h2 { margin:0 0 10px 0; color:#00ff9c; } .popup p { margin:10px 0; }
.popup .btns { margin-top:15px; display:flex; justify-content:space-between; }
.popup .btns button { width:48%; margin:0 1%; padding:12px; border:none; border-radius:8px; font-weight:bold; cursor:pointer; }
.btn-try { background:#22c55e; color:#000; } .btn-exit { background:#ff4d4d; color:#000; }

/* BACK TO MODE BUTTON */
#backMode {
  position: fixed;
  top: 16px;
  right: 16px;
  padding: 10px 14px;
  border:none;
  border-radius:6px;
  background:#58a6ff;
  color:#000;
  font-weight:bold;
  cursor:pointer;
  display:none;
}
#backMode:hover { background:#2f6fa6; }

/* BACK TO SIMULATION PAGE BUTTON */
#backSimPage {
  position: fixed;
  top: 16px;
  right: 180px;
  padding: 10px 14px;
  border:none;
  border-radius:6px;
  background:#22c55e;
  color:#000;
  font-weight:bold;
  cursor:pointer;
  display:none;
}
#backSimPage:hover { background:#16a34a; }

/* MOBILE RESPONSIVE: stack buttons */
@media(max-width: 600px){
  #backMode, #backSimPage {
    position: fixed;
    bottom: 16px;
    top: auto;
    width: 45%;
    margin: 0 4px;
  }
  #backMode { left: 4px; right: auto; }
  #backSimPage { right: 4px; left: auto; }
}
</style>
</head>
<body>

<!-- ================= TUTORIAL ================= -->
<div class="tutorial" id="tutorial">
<h1>üõ° Incident Response Training ‚Äì Briefing</h1>
<p>You are about to enter a live incident response simulation. Apply the correct commands under pressure.</p>
<div class="warning">Safe simulation. Delays and incorrect actions increase impact.</div>

<h2>Commands</h2>
<ul>
<li><code>apply containment</code> ‚Äì Stop malware spread</li>
<li><code>isolate endpoint</code> ‚Äì Disconnect infected system</li>
<li><code>scan system</code> ‚Äì Analyze malware</li>
<li><code>identify threat</code> ‚Äì Confirm malware type</li>
<li><code>quarantine threat</code> ‚Äì Partial containment</li>
<li><code>eradicate threat</code> ‚Äì Remove malware</li>
<li><code>backup data</code> ‚Äì Save files</li>
<li><code>recover system</code> ‚Äì Restore system</li>
<li><code>check logs</code> ‚Äì View activity clues</li>
<li><code>notify team</code> ‚Äì Alert SOC</li>
<li><code>help</code> ‚Äì Show guidance</li>
</ul>

<div class="mode-select">
  <button class="guided" onclick="setMode('guided')">Guided Mode</button>
  <button class="challenge" onclick="setMode('challenge')">Challenge Mode</button>
</div>
</div>

<!-- BACK BUTTONS -->
<button id="backMode" onclick="backToMode()">Back to Mode</button>
<button id="backSimPage" onclick="window.location.href='Simulation.html'">Back to Simulation Page</button>

<!-- ================= SIMULATION ================= -->
<div class="simulation" id="simulation">
<div class="layout">
<div class="main">
<h1 class="sim">üö® ACTIVE RANSOMWARE INCIDENT</h1>
<div class="alert">Endpoint <strong>WS-23</strong> is encrypting files.</div>
<div class="terminal" id="terminal"></div>
<div class="input"><span>&gt;</span><input id="cmd" placeholder="type a command" autofocus/></div>
</div>

<div class="side">
<div class="metric">‚è± Time Remaining:<br><span class="danger" id="timer">02:00</span></div>
<div class="metric">üìâ Files Affected:<br><span class="danger" id="files">37</span></div>
<div class="metric">üåê Network:<br><span id="net">CONNECTED</span></div>
<div class="metric">ü¶† Threat Status:<br><span id="status">ACTIVE</span></div>

<div id="guidedPanel" class="guided-panel" style="display:none;">
  <h3>Guided Mode</h3>
  <p class="hint">Step <span class="step" id="stepNum">1</span> / 8</p>
  <p class="hint">Next command:</p>
  <p class="next" id="nextCmd">apply containment</p>
  <p class="hint">Tip: Follow steps in order. If you type wrong, you'll receive a hint.</p>
</div>
</div>
</div>
</div>

<!-- POPUP -->
<div class="popup-bg" id="popupBg">
  <div class="popup" id="popup">
    <h2 id="popupTitle">Simulation Complete</h2>
    <p id="popupMsg">You successfully resolved the incident.</p>
    <div class="btns">
      <button class="btn-try" onclick="tryAgain()">Try Again</button>
      <button class="btn-exit" onclick="exitSim()">Exit</button>
    </div>
  </div>
</div>

<script>
let mode = null;
let simInterval = null;
let spamInterval = null;

function setMode(m){
  mode = m;
  document.getElementById("tutorial").style.display="none";
  document.getElementById("simulation").style.display="block";
  document.getElementById("guidedPanel").style.display = (mode === "guided") ? "block" : "none";
  document.getElementById("backMode").style.display = "inline-block";
  document.getElementById("backSimPage").style.display = "inline-block";
  initSim();
}

function backToMode(){
  clearIntervals();
  document.getElementById("simulation").style.display="none";
  document.getElementById("tutorial").style.display="block";
  document.getElementById("guidedPanel").style.display="none";
  document.getElementById("backMode").style.display="none";
  document.getElementById("backSimPage").style.display="none";
  mode = null;
}

function clearIntervals(){
  if(simInterval) clearInterval(simInterval);
  if(spamInterval) clearInterval(spamInterval);
}

function tryAgain(){
  clearIntervals();
  document.getElementById("popupBg").style.display = "none";
  initSim();
}

function exitSim(){
  window.location.href = "solutions.html";
}

function initSim(){
  const term = document.getElementById("terminal");
  const cmd = document.getElementById("cmd");
  const timerEl = document.getElementById("timer");
  const filesEl = document.getElementById("files");
  const nextCmdEl = document.getElementById("nextCmd");
  const stepNumEl = document.getElementById("stepNum");
  const popupBg = document.getElementById("popupBg");
  const popupTitle = document.getElementById("popupTitle");
  const popupMsg = document.getElementById("popupMsg");

  term.innerHTML = "";
  cmd.disabled = false;
  cmd.value = "";

  let time = mode === "challenge" ? 70 : 90;
  let files = 37;
  let state = {contained:false, isolated:false, scanned:false, identified:false, quarantined:false, eradicated:false, backedUp:false};
  let guidedStep = 0;
  const guidedSteps = ["apply containment","isolate endpoint","scan system","identify threat","quarantine threat","eradicate threat","backup data","recover system"];

  function log(msg,type){ const d=document.createElement("div"); d.textContent=msg; if(type) d.classList.add(type); term.appendChild(d); term.scrollTop=term.scrollHeight; }

  function spamTerminal(){
    const spamLogs = ["Updating package list...","Checking repository metadata...","Downloading package info...","Installing dependencies...","Applying security patch...","Verifying signatures...","Updating modules...","Cleaning temporary files...","Checking disk integrity...","Rebuilding cache...","Syncing system time...","Monitoring process status...","Checking firewall rules...","Scanning for anomalies...","Writing log to disk...","Finalizing update..."];
    let i=0;
    spamInterval = setInterval(()=>{ log(spamLogs[i%spamLogs.length]); i++; if(i>60) clearInterval(spamInterval); }, mode==="challenge"?80:120);
  }

  function updateGuidedPanel(){ if(mode!=="guided") return; if(guidedStep>=guidedSteps.length){ nextCmdEl.textContent="COMPLETED"; stepNumEl.textContent=guidedSteps.length; return; } nextCmdEl.textContent=guidedSteps[guidedStep]; stepNumEl.textContent=(guidedStep+1); }

  function startTimer(){
    simInterval = setInterval(()=>{
      time--;
      let loss=Math.floor(Math.random()*5+3);
      files+=loss;
      timerEl.textContent=`0${Math.floor(time/60)}:${String(time%60).padStart(2,"0")}`;
      filesEl.textContent=files;
      if(time<=0){ showPopup("Failed","SYSTEM COMPROMISED: Files encrypted."); cmd.disabled=true; clearIntervals(); }
    },1000);
  }

  function showPopup(title,msg){ popupTitle.textContent=title; popupMsg.textContent=msg; popupBg.style.display="flex"; cmd.disabled=true; }

  async function commandResponse(input){
    if(mode==="guided" && input!==guidedSteps[guidedStep] && input!=="help"){ log("‚ùå Wrong command for this step.","error"); log("‚û°Ô∏è Hint: "+guidedSteps[guidedStep],"success"); files+=5; return; }
    switch(input){
      case "apply containment": state.contained=true; log("[SYSTEM] Containment applied","success"); break;
      case "isolate endpoint": state.isolated=true; log("[SYSTEM] Endpoint isolated","success"); break;
      case "scan system": state.scanned=true; log("[SYSTEM] Scan complete","success"); break;
      case "identify threat": state.identified=true; log("[SYSTEM] Threat identified: Ransomware","success"); break;
      case "quarantine threat": state.quarantined=true; log("[SYSTEM] Threat quarantined","success"); break;
      case "eradicate threat": state.eradicated=true; log("[SYSTEM] Threat eradicated","success"); break;
      case "backup data": state.backedUp=true; log("[SYSTEM] Data backed up","success"); break;
      case "recover system": log("[SYSTEM] System recovered. Incident resolved.","success"); guidedStep=guidedSteps.length; showPopup("Success","You successfully resolved the incident."); clearIntervals(); break;
      case "check logs": log("[LOGS] Malware modified 37 files","success"); break;
      case "notify team": log("[ALERT] Team notified","success"); break;
      case "help": log("Available commands: "+guidedSteps.concat(["check logs","notify team"]).join(", "),"success"); break;
      default: log("[ERROR] Unknown command","error"); files+=10; break;
    }
    if(mode==="guided") guidedStep++;
    updateGuidedPanel();
  }

  spamTerminal();
  startTimer();
  updateGuidedPanel();

  cmd.addEventListener("keydown", async e=>{ if(e.key!=="Enter") return; const input=cmd.value.trim().toLowerCase(); cmd.value=""; log("> "+input,"success"); commandResponse(input); });
}
</script>
</body>
</html>

